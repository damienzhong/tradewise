<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
</head>
<body>
<!-- 通用脚本片段 - 处理侧边栏折叠事件 -->
<div th:fragment="common-script">
    <script>
        // 监听侧边栏折叠事件
        window.addEventListener('sidebarToggle', function(e) {
            const container = document.getElementById('mainContainer');
            const topbar = document.getElementById('topbar');
            
            if (e.detail.collapsed) {
                if (container) container.classList.add('sidebar-collapsed');
                if (topbar) topbar.classList.add('sidebar-collapsed');
            } else {
                if (container) container.classList.remove('sidebar-collapsed');
                if (topbar) topbar.classList.remove('sidebar-collapsed');
            }
        });
        
        // 页面加载时检查侧边栏状态
        document.addEventListener('DOMContentLoaded', function() {
            const isCollapsed = localStorage.getItem('sidebarCollapsed') === 'true';
            if (isCollapsed) {
                const container = document.getElementById('mainContainer');
                const topbar = document.getElementById('topbar');
                if (container) container.classList.add('sidebar-collapsed');
                if (topbar) topbar.classList.add('sidebar-collapsed');
            }
        });
    </script>
</div>
</body>
</html>
